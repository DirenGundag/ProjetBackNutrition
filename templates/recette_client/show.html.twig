{% extends 'base.html.twig' %}

{% block title %}Recette{% endblock %}

{% block body %}
    <h1>Recette</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ recette.id }}</td>
            </tr>
            <tr>
                <th>Titre</th>
                <td>{{ recette.titre }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ recette.description }}</td>
            </tr>
            <tr>
                <th>Tempspreparation</th>
                <td>{{ recette.tempspreparation ? recette.tempspreparation|date('H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>Tempsrepos</th>
                <td>{{ recette.tempsrepos ? recette.tempsrepos|date('H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>Tempscuisson</th>
                <td>{{ recette.tempscuisson ? recette.tempscuisson|date('H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>Ingredients</th>
                <td>{{ recette.ingredients }}</td>
            </tr>
            <tr>
                <th>Etapes</th>
                <td>{{ recette.etapes }}</td>
            </tr>
            {# <tr>
                <th>Typesregimes</th>
                <td>{{ recette.typesregimes }}</td>
            </tr>
            <tr>
                <th>Allergenes</th>
                <td>{{ recette.allergenes }}</td>
            </tr> #}
        </tbody>
    </table>

    <style>

.rating {
    text-align: center;
    color: black;
}
.star {
    font-size: 1.5rem;
    cursor: pointer;
    transition: color 0.2s;
}

.star.active {
    color: gold;
}
#form_note {
  display: none;
}#form_note {
  visibility: hidden;
}
button[type="submit"] {
    background-color: #609A7D;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    margin-top: 10px;
    font-family: arial;
  }
  
</style>
    {{ form_start(form, { 'action': path('app_recette_client_show', { 'id': recette.id }) }) }}
    {{ form_widget(form.commentaire) }}
    <div class="rating">
        <span class="star" data-rating="1">&#9733;</span>
        <span class="star" data-rating="2">&#9733;</span>
        <span class="star" data-rating="3">&#9733;</span>
        <span class="star" data-rating="4">&#9733;</span>
        <span class="star" data-rating="5">&#9733;</span>
        {{ form_widget(form.note, {'id': 'form_note'}) }}
    </div>
    <button type="submit">Soumettre l'avis</button>
    {{ form_end(form) }}
    <script>

// Sélectionnez toutes les étoiles
const stars = document.querySelectorAll('.star');
// Récupérez le champ de note du formulaire
const noteField = document.getElementById('form_note');

// Ajoutez un écouteur d'événement à chaque étoile
stars.forEach(star => {
    star.addEventListener('click', () => {
        // Récupérez la valeur de l'étoile cliquée
        const rating = star.dataset.rating;

        // Mettez à jour l'affichage des étoiles
        updateStars(rating);

        // Mettez à jour la valeur du champ de note
        noteField.value = rating;

        // Enregistrez la valeur de la note ou effectuez toute autre action souhaitée
        saveRating(rating);
    });
});

// Fonction pour mettre à jour l'affichage des étoiles
function updateStars(rating) {
    stars.forEach(star => {
        if (star.dataset.rating <= rating) {
            star.classList.add('active');
        } else {
            star.classList.remove('active');
        }
    });
}
</script>

{% endblock %}
